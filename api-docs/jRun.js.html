

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: jRun.js | Fanavard TetrisGame</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
        
            <link type="text/css" rel="stylesheet" href="styles/custom.css">
        
    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 200px; height: 85px">
        
            <a href="#" rel="noopener noreferrer" target="_blank">
                <img src="./img/logo.png" width="100%" height="100%">
            </a>
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Fanavard TetrisGame</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="Charblock.html">Charblock</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Charblock_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Charblock.html#.destroy">destroy</a></li><li><a href="Charblock.html#.factory">factory</a></li><li><a href="Charblock.html#.getNew">getNew</a></li><li><a href="Charblock.html#.move">move</a></li><li><a href="Charblock.html#.showUpComingChar">showUpComingChar</a></li></ul></div></li><li><a href="Interval.html">Interval</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Interval_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Interval.html#clear">clear</a></li><li><a href="Interval.html#clearAll">clearAll</a></li><li><a href="Interval.html#make">make</a></li></ul></div></li><li><a href="MaterialColor.html">MaterialColor</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="MaterialColor_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="MaterialColor.html#.getRandomColor">getRandomColor</a></li><li><a href="MaterialColor.html#.pickRandomProperty">pickRandomProperty</a></li></ul></div></li><li><a href="Matrix.html">Matrix</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Matrix_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Matrix.html#_deleteCharacters">_deleteCharacters</a></li><li><a href="Matrix.html#_getRailingChars">_getRailingChars</a></li><li><a href="Matrix.html#checkWords">checkWords</a></li><li><a href="Matrix.html#setCharacter">setCharacter</a></li></ul></div></li><li><a href="Modal.html">Modal</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Modal_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Modal.html#createContent">createContent</a></li><li><a href="Modal.html#createFooter">createFooter</a></li><li><a href="Modal.html#createHeader">createHeader</a></li><li><a href="Modal.html#destroy">destroy</a></li><li><a href="Modal.html#show">show</a></li></ul></div></li><li><a href="Sound.html">Sound</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Sound_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Sound.html#.getInstance">getInstance</a></li><li><a href="Sound.html#.makeInstanceName">makeInstanceName</a></li><li><a href="Sound.html#.playByKey">playByKey</a></li><li><a href="Sound.html#.setInstance">setInstance</a></li><li><a href="Sound.html#pause">pause</a></li><li><a href="Sound.html#play">play</a></li></ul></div></li><li><a href="Storage.html">Storage</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Storage_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Storage.html#.get">get</a></li><li><a href="Storage.html#.getInt">getInt</a></li><li><a href="Storage.html#.getJson">getJson</a></li><li><a href="Storage.html#.set">set</a></li></ul></div></li><li><a href="Swipe.html">Swipe</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Swipe_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Swipe.html#buildListeners">buildListeners</a></li><li><a href="Swipe.html#destroy">destroy</a></li><li><a href="Swipe.html#onTouchEnd">onTouchEnd</a></li><li><a href="Swipe.html#onTouchStart">onTouchStart</a></li><li><a href="Swipe.html#whileTouch">whileTouch</a></li></ul></div></li><li><a href="TetrisGame.html">TetrisGame</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="TetrisGame_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="TetrisGame.html#config">config</a></li><li><a href="TetrisGame.html#initValues">initValues</a></li><li><a href="TetrisGame.html#playBoard">playBoard</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="TetrisGame.html#.build">build</a></li><li><a href="TetrisGame.html#.checkWordSuccess">checkWordSuccess</a></li><li><a href="TetrisGame.html#.getValidColumnsNumber">getValidColumnsNumber</a></li></ul></div></li><li><a href="Timer.html">Timer</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Timer_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Timer.html#pause">pause</a></li><li><a href="Timer.html#resume">resume</a></li><li><a href="Timer.html#start">start</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Global</h3><ul><li><a href="global.html#addLanguage">addLanguage</a></li><li><a href="global.html#allowedInitTypes">allowedInitTypes</a></li><li><a href="global.html#allowInit">allowInit</a></li><li><a href="global.html#arshLoader">arshLoader</a></li><li><a href="global.html#build">build</a></li><li><a href="global.html#buildDummy">buildDummy</a></li><li><a href="global.html#buildPlugIns">buildPlugIns</a></li><li><a href="global.html#checkLoad">checkLoad</a></li><li class="hidden"><a href="global.html#CheckTypes">CheckTypes</a></li><li><a href="global.html#debugMode">debugMode</a></li><li><a href="global.html#deepExtend">deepExtend</a></li><li><a href="global.html#defaultLoadProperties">defaultLoadProperties</a></li><li><a href="global.html#defaultType">defaultType</a></li><li><a href="global.html#deleteNode">deleteNode</a></li><li><a href="global.html#disableCache">disableCache</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#isFunction">isFunction</a></li><li><a href="global.html#jRun">jRun</a></li><li><a href="global.html#loadedFiles">loadedFiles</a></li><li><a href="global.html#notAllowedUserAttributes">notAllowedUserAttributes</a></li><li><a href="global.html#plugins">plugins</a></li><li class="hidden"><a href="global.html#RailingChars">RailingChars</a></li><li><a href="global.html#reverse">reverse</a></li><li><a href="global.html#sanitizeName">sanitizeName</a></li><li><a href="global.html#setLoadedFlag">setLoadedFlag</a></li><li><a href="global.html#TetrisWords">TetrisWords</a></li><li class="hidden"><a href="global.html#TimerConfig">TimerConfig</a></li><li><a href="global.html#urlPrefix">urlPrefix</a></li><li><a href="global.html#version">version</a></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Main JavaScript file to manage pages js
 *
 * @author    : jafar rezaei &lt;bomber.man87@yahoo.com>
 * @link      : http://jrjs.ir
 * @version   : 2018/06/08
 */
let jRun = {


    /**
     *  jRun version to check updates and force files caching validation
     */
    version: "1.0.23",


    /**
     *  Main plugIns that you want to load at page load
     *  add only main plugIns here and use init
     *  @example :
     *     jRun.plugins = [{
     *        url : "jquery/jquery.min" ,
     *        kind : "PlugIn"
     *     }];
     */
    plugins: [],



    /**
     * Set array of types we let them to initialize with .init function
     */
    allowedInitTypes: [
        'css',
        'js'
    ],


    /**
     * Files url prefix string link : 'public/'
     * @summary : add `/` at the end of string
     */
    urlPrefix: '',


    /**
     * If a file has type which not allowed by `allowedInitTypes` Or has
     * not any type we use js type.
     */
    defaultType: 'js',


    /**
     * Default properties for loadFile function
     */
    defaultLoadProperties: {
        waitLoading: true,
        kind: false,
        url: '',
        urls: [],
        cdn: false,
        attributes: {},
        multiFileUrl: false,
        afterLoad: function () { },
        beforeLoad: function () { },
        errorLoading: function () { }
    },

    /**
     * Attributes which should not added by user
     */
    notAllowedUserAttributes: [
        'href',
        'src'
    ],


    /**
     * Keep loaded files
     */
    loadedFiles: [],


    /**
     * Enable system debug mode
     */
    debugMode: true,


    /**
     * Do not let files to be cached
     */
    disableCache: true,


    /**
     * Allow init files flag , this flag check if main
     * plugIns loaded already or not and then allow init
     * the utility or even plug-ins which user want to add.
     */
    allowInit: false,


    /**
     * Remove extra chars from script name
     * @param name
     * @return string
     */
    sanitizeName: function (name) {
        return name.toString().split("/").pop().replace(/\/|\.|-/g, "_");
    },


    /**
     * Build dummy string
     * @return {string}
     */
    buildDummy: function () {
        return "?jDummy=" + Math.floor(999999999 * Math.random() + 1);
    },


    /**
     * Set flag to remember which files are loaded
     * @param name
     */
    setLoadedFlag: function (name) {
        this.loadedFiles.push(this.sanitizeName(name));
    },


    /**
     * Check if a file is loaded or not
     * @param script
     * @returns {boolean}
     */
    checkLoad: function (script) {
        return this.loadedFiles.indexOf(script) > -1;
    },


    /**
     * Extend object
     *
     * @param out
     * @returns {*|{}}
     */
    deepExtend: function (out) {
        out = out || {};

        for (let i = 1; i &lt; arguments.length; i++) {
            let obj = arguments[i];

            if (!obj)
                continue;

            if (typeof obj === 'object') {
                for (let key in obj) {
                    if (obj.hasOwnProperty(key)) {
                        if (typeof obj[key] === 'object')
                            out[key] = jRun.deepExtend(out[key], obj[key]);
                        else
                            out[key] = obj[key];
                    }
                }
            }
        }
        return out;
    },


    /**
     * Build whole mechanism of jRun here
     * system will run it at page load.
     */
    build: function () {

        // alias log instead of console.log in dev mode
        let log = function (message, type) {
            type = type || 'log';
            let stack = new Error().stack.toString().split(/\r\n|\n/);
            console[type](message, '          [' + stack[1] + ']');
        };

        if (typeof window !== 'undefined') {
            window.log = log;
        }

        // load main configuration
        this.firstCall = true;

        if (this.plugins.length > 0) {
            this.buildPlugIns();
        } else {
            this.allowInit = true;
        }

        return this;
    },


    /**
     * Build main plug-ins
     * @param plugins
     * @param callback
     */
    buildPlugIns: function (plugins , callback) {

        this.plugins = plugins || this.plugins;

        this.allowInit = false;
        this.init(this.plugins, function () {
            jRun.allowInit = true;
            return callback || (function () {});
        });
    },


    /**
     * Add lang file
     * @param lang
     * @param callback
     */
    addLanguage: function (lang, callback) {

        if (jRun.checkLoad("lang" + lang) || lang === "") {
            return true;
        }

        jRun.init(
            [{
                url: "lang." + lang + ".js",
                kind: "Langs",
                attributes: { class: 'isLanguageFile' },
                waitLoading: false,
                afterLoad: function () {
                    if (typeof callback === "function") callback();
                }
            }]
        );

    },


    /**
     * Add specific file (css,js) to our page
     * @param urls
     * @param callback
     */
    init: function (urls, callback) {

        if (!(jRun.allowInit || jRun.firstCall)) {
            // sleep a bit and call your self again after 100 milliSeconds
            setTimeout(function () {
                jRun.init(urls, callback);
            }, 100);
            return false;
        }

        jRun.firstCall = false;
        let waiting = false,
            loadFinishCount = 0,
            endsWith = function (str, suffix) {
                if (str === null || suffix === null)
                    return false;
                return str.indexOf(suffix, str.length - suffix.length) !== -1;
            },
            loadFinish = function (o) {
                if (!o.multiFileUrl)
                    loadFinishCount++;


                // add file added flag
                jRun.setLoadedFlag(o.url);

                // call self after load function
                o.afterLoad();

                if (urls.length === loadFinishCount) {
                    if (callback !== undefined &amp;&amp; typeof callback === "function") {
                        if (jRun.debugMode) {
                            log("...... Start All Callback ......");
                        }
                        callback();
                    }
                }
            },

            loadFile = function (o) {

                if (jRun.debugMode &amp;&amp; o.url === "") {
                    let callbackStack = new Error().stack.toString().split(/\r\n|\n/);
                    throw "File url is empty [" + callbackStack[1] + "]";
                }


                if (!waiting) {

                    let realName = jRun.sanitizeName(o.url);

                    // if file is loaded already
                    if (jRun.checkLoad(realName)) {
                        if (jRun.debugMode) {
                            log(realName + " : Was already added !");
                            log(jRun.loadedFiles);
                        }
                        loadFinish(o);
                        return false;
                    }



                    let kind = o.kind ? o.kind + "/" : "";
                    let type = o.url.split('.').pop();

                    if (jRun.allowedInitTypes.indexOf(type) &lt; 0) {
                        type = jRun.defaultType;
                    }

                    let fileReference = document.createElement((type === "js" ? 'script' : 'link'));
                    let url = kind + (endsWith(o.url, "." + type) ? o.url : o.url + "." + type);


                    o.beforeLoad();


                    let extraParameter = "?jVer=" + jRun.version;
                    if (jRun.disableCache) {
                        extraParameter = jRun.buildDummy();
                    }

                    if (type === "js") {
                        fileReference.src = o.cdn ? url : jRun.urlPrefix + "Javascript/" + url + extraParameter;
                    } else {
                        fileReference.type = "text/css";
                        fileReference.rel = "stylesheet";
                        fileReference.href = o.cdn ? url : jRun.urlPrefix + "Css/" + url + extraParameter;
                    }


                    jRun.notAllowedUserAttributes.forEach(function (attr) {
                        delete o.attributes[attr];
                    });


                    // add user extra attributes
                    fileReference = jRun.deepExtend(fileReference, o.attributes);

                    fileReference.onload = function () {
                        if (jRun.debugMode) {
                            log('Loaded -> ' + o.multiFileUrl + " -> " + o.url);
                        }
                        if (typeof loadFinish === "function") loadFinish(o);
                    };



                    fileReference.onerror = function () {
                        o.errorLoading();
                        if (jRun.debugMode) {
                            log('Error loading -> ' + o.multiFileUrl + " -> " + o.url);
                        }
                    };

                    document.head.appendChild(fileReference);

                } else {
                    // sleep a bit and call your self again after 100 milliSeconds
                    setTimeout(function () {
                        loadFile(o);
                    }, 100);
                }
            };


        urls = (typeof urls === "string") ? [urls] : urls;


        urls.forEach(function (url) {
            let options = {};


            options = jRun.deepExtend({}, jRun.defaultLoadProperties, url);

            if (typeof url === "string") {
                options['url'] = url;
                options['kind'] = 'Utility';
            }

            let urlKeys = Object.keys(options.urls);
            if (urlKeys.length > 0) {
                urlKeys.forEach(function (key) {
                    options.multiFileUrl = (key !== 1);
                    options.url = options.urls[key];
                    loadFile(options);
                });
            } else {
                loadFile(options);
            }
        });

    }
}.build();


if (typeof module !== 'undefined' &amp;&amp; typeof module.exports !== 'undefined') {
    module.exports = jRun;
}
</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="./img/logo.png" style="width: 200px; height: 85px">
    <div class="footer-text">Made with <3 by ArshTeam. Documented with JsDoc3, TuiTheme.</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
